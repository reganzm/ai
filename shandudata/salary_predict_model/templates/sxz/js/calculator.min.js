var Calculator=(function(d,b){var c={bk:"本科",bs:"博士",ss:"硕士",zk:"专科"},h={man:"男",woman:"女"},i={cp:"产品狗",gcs:"攻城狮",sj:"射鸡湿",yy:"运营人猿",sc:"市场商务",xz:"暖心行政"},k={gcs:{"C/C++":"C/C++","C#":"C#",Java:"Java",Python:"Python",PHP:"PHP",JavaScript:"JavaScript",Android:"Android",iOS:"iOS",qd:"前端",hd:"后端",ce:"测试",yw:"运维",xmjl:"项目经理",jgs:"架构师",zj:"总监"},xz:{xz:"行政",rs:"人事",cw:"财务",kf:"客服",zj:"总监/经理",zl:"助理"},sj:{sjsj:"视觉设计",jxsj:"交互设计",pmsj:"平面设计",yxms:"游戏美术",dh:"动画",yh:"原画",yy:"用研",UI:"UI",UE:"UE",WEB:"WEB",APP:"APP",zj:"总监"},cp:{cpjl:"产品经理",cpzj:"产品总监",cpzl:"产品助理"},sc:{xs:"销售",sctg:"市场推广",zj:" 总监"},yy:{yyzy:"运营专员",yyzj:"运营总监",bj:"编辑",zb:"主编"}},g={bj:"北京",sh:"上海",gz:"广州",sz:"深圳",hz:"杭州",cd:"成都",cq:"重庆",wh:"武汉",xa:"西安"},f={"1":"1-2","1_3":"2-4","3_5":"4-8","5":"8-30"},j={by:"白羊座",jn:"金牛座",szi:"双子座",jx:"巨蟹座",sz:"狮子座",cn:"处女座",tc:"天秤座",tx:"天蝎座",ss:"射手座",mj:"摩羯座",sp:"水瓶座",sy:"双鱼座"},e={1:{sex:{man:"哥们儿",woman:"姐们儿"}}},a=function(l){return new a.prototype.init(l);};a.prototype={init:function(l){this.setting=l=d.extend({step:0,elements:[],prefix:"#JS_sxz_",interlude:"hide",defaultPage:".landing-page",data:{degree:null,gender:null,jobType:null,secondClass:null,city:null,workLength:null,scale:null,constellation:null},ext:{q1:null,q2:null}},l);window.__Cal=this;this.addHtml();},addHtml:function(){var l=this.setting,m=l.step,n=l.prefix;d(".content").remove();d("body").append(this.getHtml());this.addEvent();},getHtml:function(){var A=this.setting,p=A.step,t=A.data,v=t.sex,r=t.city,n=t.jobType,q=t.degree,o=t.constellation,z=t.workLength,u="";if(p==0){u=d("#JS_sxz_0").html();}if(p==1){u='<div class="content"><h2 class="select-title step-1">日照香炉生紫烟，'+e[p].sex[v]+'你在哪混圈？</h2><div class="city-list clearfix">';for(var s in g){u+='<a href="javascript:;" title="" data-city="'+s+'" class="select-btn JS_select_city primary-btn small-btn">'+g[s]+"</a>";}u+="</div></div>";var x='<div class="footer" id="JS_footer"><div class="bottom-box"><div class="earth"><img src="img/common/earth.png" alt="" width="100%"></div><div class="person '+v+'"><img src="img/rw/'+v+"/"+v+'.png" width="100%" alt=""></div></div></div>';d("body").append(x);}if(p==2){var m={bj:"烤鸭文青－羡慕死了，你在帝都。除了吃烤鸭赏话剧，你的看家本领是？",cd:"天腐之国－羡慕死了，你在成都。除了吃串串逗基友，你的看家本领是？",gz:"养生胜地－羡慕死了，你在羊城。除了游珠江喝早茶，你的看家本领是？",hz:"人间天堂—羡慕死了，你在杭州。除了游西湖品龙井，你的看家本领是？",sh:"红酒小资－羡慕死了，你在魔都。除了品红酒听JAZZ，你的看家本领是？",sz:"土豪扎堆－羡慕死了，你在深圳。除了吸金狂shopping，你的看家本领是？",wh:"学霸云集－羡慕死了，你在武汉。除了啃鸭脖赏樱花，你的看家本领是？",xa:"千年古都－羡慕死了，你在西安，除了逛皇陵忆历史，你的看家本领是？",cq:"火锅辣妹－羡慕死了，你在山城。除了吃火锅看美女，你的看家本领是？"};u='<div class="content"><h2 class="select-title step-1">'+m[r]+'</h2><div class="job-list clearfix">';for(var s in i){u+='<a href="javascript:;" title="" '+(k[s]?'data-child="true"':"")+' data-jobType="'+s+'" class="select-btn JS_select_job">'+i[s]+"</a>";}u+="</div></div>";var y='<div class="bottom-box"><div class="city '+r+'"><img src="img/city/'+r+'.png" alt="" width="100%"></div></div>';d("#JS_footer").prepend(y);}if(p==3){u=d("#JS_sxz_3").html();d(".person").attr("class","person "+v+" "+n).html('<img src="img/rw/'+v+"/"+n+"/"+n+'.png" width="100%" alt="">');}if(p==4){u=d("#JS_sxz_4").html();d(".city").parent().remove();d(".person").html('<img src="img/rw/'+v+"/"+n+"/"+z+"/"+n+"_"+z+'.png" width="100%" alt="">');d("#JS_footer").append(d("#JS_footer_decorate").html());}if(p==5){u=d("#JS_sxz_5").html();var l='<div class="degree"><img src="img/degree/'+q+'.png" alt="" width="100%"></div>';d(".person").parent().prepend(l);}if(p==6){d(".computer").parent().remove();d(".degree").remove();d(".degree").remove();u=d("#JS_sxz_6").html();}if(p==7){u=d("#JS_sxz_7").html();var w='<img src="img/rw/'+v+"/"+n+"/"+z+"/"+n+"_"+z+"_"+o+'.png" width="100%" alt="">';d(".person").html(w);}if(p==8){u=d("#JS_sxz_8_"+v).html();}return u;},addEvent:function(){var l=this.setting,m=l.step;if(!l.elements||!l.elements[m]||!l.elements[m].event||typeof l.elements[m].event!="function"){return;}l.elements[m].event();},next:function(){if(!this.setting.elements.length||!this.setting.elements[this.setting.step+1]){return;}this.setting.step++;this.addHtml();},getSalary:function(){var n=this.setting.data,m=this.setting.ext,o={degree:c[n.degree],gender:h[n.sex],jobType:i[n.jobType],secondClass:n.secondClass,city:g[n.city],workLength:f[n.workLength],scale:n.scale,constellation:j[n.constellation],src:d(".person img").attr("src")};var l=JSON.stringify({data:o,ext:m});d.get("/salary_predict_pro",{p:l},function(t){if(!t){return;}d(".content").remove();var s=d("#JS_result").html();d("body").append(s);d("#JS_footer").append('<div class="bottom-box"><div class="coin"><img src="img/common/coin.png" alt="" width="100%"></div></div>');d("#JS_current_salary").html(t.current);var u="",p=parseInt(t.future).toString();for(var r=0,q=p.length;r<q;r++){u+="<code>"+p[r]+"</code>";}d("#JS_next_salary").html(u);d(".person").hide();d("#JS_accuracy a").on("click",function(){var v=d(this).attr("data-accuracy");d.get("/predict_feedback?id="+t.id+"&accuracy="+v,{},function(){});setTimeout(function(){window.location.href="more.html"+t.src+"&id="+t.id;},500);});},"json");},loadChildClass:function(l){var n="",o=this;for(var m in k[l]){var p=m;n+='<a href="javascript:;" title="" data-secondClass="'+p+'" class="select-btn select_secondClass small-btn"'+(l!="cp"?'data-multi="true"':"")+">"+k[l][m]+"</a>";}n+='<br><a href="javascript:;" title="" class="select-btn JS_select_secondClass small-btn confirm-btn">确定</a>';d(".job-list").html(n);d(".select-title").html("请选择您的职位标签");if(l=="gcs"||l=="sj"){d(".job-list,.select-title").addClass("max320");}d(".select_secondClass").on("click",function(){d(this).toggleClass("active");if(!d(this).attr("data-multi")){d(this).siblings(".active").removeClass("active");}});d(".JS_select_secondClass").on("click",function(){var q=[],r=d(".select_secondClass.active");if(!r.length){return;}r.each(function(){var s=k[o.setting.data.jobType][d(this).attr("data-secondClass")];q.push(s);});window.__Cal.setting.data.secondClass=q;window.__Cal.next();});}};a.prototype.init.prototype=a.prototype;return function(l){a(l);};})(jQuery);var getUrlParam=function(f,d){if(!f){return;}d=d||location.search.substring(1);var a=d.split("&");for(var e=0,b=a.length;e<b;e++){var c=a[e].split("=");if(c[0]==f){return c[1];}}return"";};var loadMore=function(){var c={gender:getUrlParam("gender"),increase:getUrlParam("increase"),src:getUrlParam("src"),city:decodeURI(getUrlParam("city")),year:getUrlParam("year"),summary:decodeURI(getUrlParam("summary"))},d={"土豪":"th","屌丝":"ds","小康":"xk","温饱":"wb"},h={man:"nan",woman:"nv"},g=function(j,k){var i={ds:{man:"岂止拖后腿，简直都拖到脚跟了！",woman:"岂止拖后腿，简直都拖到脚跟了！"},wb:{man:"跳个槽or求加薪，That is a question !",woman:"比上不足比下有余，明年待我更努力！"},xk:{man:"不好意思厚，贫富差距又拉大噜！",woman:"不好意思厚，贫富差距又拉大噜！"},th:{man:"拉高平均水平这种事也不是故意的呢！",woman:"拉高平均水平这种事也不是故意的呢！"}};return i[j][k];},b=function(j){var i='<div class="content"><div class="forecast"><div class="text-center"><img src="img/other/'+(d[j.summary]+h[j.gender])+'.png" width="100%" alt=""></div><div class="text-center house-info">不吃不喝在<cite id="JS_city">'+j.city+'</cite>买房<cite class="arial" id="JS_year">'+j.year+'</cite>年</div><div class="salary-info text-center">你的薪资涨幅为</div><h2 class="r-title"><code id="JS_up_percent">'+j.increase+'%</code><br><span id="JS_comment">'+g(d[j.summary],j.gender)+"</span></h2></div></div>";return i;};$("body").append($("#JS_footer_tem").html());if(window.owner){$("#JS_share").find(".text-center").show();var e={win:false,mac:false,xll:false};var f=navigator.platform;e.win=f.indexOf("Win")==0;e.mac=f.indexOf("Mac")==0;e.x11=(f=="X11")||(f.indexOf("Linux")==0);if(!e.win&&!e.mac&&!e.xll){$(".jiathis_button_weixin").hide();}}else{$("#JS_play").show();}var a=b(c)+$("#JS_result_"+d[c.summary]+h[c.gender]).html();$("#JS_wx_img").after(a);$(".person").append($('<img src="'+c.src+'" width="100%" alt="">'));};var loadEmial=function(){var a=$("#JS_footer_tem").html(),b=getUrlParam("src");$("body").prepend(a);$(".person").append($('<img src="'+b+'" width="100%" alt="">'));};function is_iPad(){var a=navigator.userAgent.toLowerCase();if(a.match(/iPad/i)=="ipad"){return true;}else{return false;}}$(function(){var a=[{event:function(){$(".JS_choose_sex").on("click",function(){var b=$(this).attr("data-sex");window.__Cal.setting.data.sex=b;window.__Cal.next();});}},{event:function(){$(".JS_select_city").on("click",function(){var b=$(this).attr("data-city");window.__Cal.setting.data.city=b;window.__Cal.next();});}},{event:function(){$(".JS_select_job").on("click",function(){var c=$(this),b=c.attr("data-jobType");window.__Cal.setting.data.jobType=b;if(c.attr("data-child")){window.__Cal.loadChildClass(b);}else{window.__Cal.next();}});}},{event:function(){$(".JS_select_workLength").on("click",function(){var b=$(this).attr("data-workLength");window.__Cal.setting.data.workLength=b;window.__Cal.next();});}},{event:function(){$(".JS_select_degree").on("click",function(){var b=$(this).attr("data-degree");window.__Cal.setting.data.degree=b;window.__Cal.next();});}},{event:function(){$(".JS_select_scale").on("click",function(){var b=$(this).attr("data-scale");window.__Cal.setting.data.scale=b;window.__Cal.next();});}},{event:function(){$(".select_constel").on("click",function(){var b=$(this).attr("data-constel");window.__Cal.setting.data.constellation=b;window.__Cal.next();});}},{event:function(){$(".JS_select_q1").on("click",function(){var c=$(this).attr("data-an"),b=$(this).text();window.__Cal.setting.ext.q1={};window.__Cal.setting.ext.q1[c]=b;window.__Cal.next();});}},{event:function(){$(".JS_select_q2").on("click",function(){var c=$(this).attr("data-an"),b=$(this).text();window.__Cal.setting.ext.q2={};window.__Cal.setting.ext.q2[c]=b;window.__Cal.getSalary();});}}];$("#JS_start_btn").on("click",function(){$(this).closest(".panel").addClass("hide");Calculator({elements:a});$(this).blur();});$(document).on("click","#JS_restart",function(){$("#JS_footer,.content").remove();Calculator({elements:a});$(this).blur();});$(document).on("touchstart",".select-btn",function(){$(this).addClass("hover");});$(document).on("touchend",".select-btn",function(){$(this).removeClass("hover");});if($(window).width()>780){$("body").prepend($("#JS_background").html());}});